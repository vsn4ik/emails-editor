{"version":3,"file":"emails-editor.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/emails-editor.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import styles from './emails-editor.css';\n\nconst EMAIL_REG_EXP = /^\\S+@\\S+$/;\n\nconst generateEmail = () => {\n    const chars = 'abcdefghijklmnopqrstuvwxyz0123456789';\n\n    return chars[Math.floor(Math.random() * 26)] + Math.random().toString(36).substring(2, 11) + '@domain.com';\n};\n\nconst updateClassListByContent = (node) => {\n    const isValid = EMAIL_REG_EXP.test(node.textContent);\n\n    node.classList.toggle(styles.item_invalid, !isValid);\n};\n\nclass EmailsEditor {\n    constructor({ container, ...options }) {\n        this.node = container;\n        this.boardName = options.boardName || 'Board Name';\n        this.emails = new Set();\n        this.subscribers = [];\n\n        this.init();\n        this.initListeners();\n    }\n\n    init() {\n        this.wrapperNode = document.createElement('div');\n        this.wrapperNode.classList.add(styles.wrapper);\n\n        this.mainNode = document.createElement('div');\n        this.mainNode.classList.add(styles.main);\n\n        this.headerNode = document.createElement('div');\n        this.headerNode.innerHTML = `Share <strong>${this.boardName}</strong> with others`; // TODO: XSS\n        this.headerNode.classList.add(styles.header);\n\n        this.boxWrapperNode = document.createElement('div');\n        this.boxWrapperNode.classList.add(styles['box-wrapper']);\n\n        this.boxNode = document.createElement('div');\n        this.boxNode.classList.add(styles.box);\n\n        this.inputNode = document.createElement('input');\n        this.inputNode.placeholder = 'add more people...';\n        this.inputNode.spellcheck = false;\n        this.inputNode.classList.add(styles.input);\n\n        this.buttonsNode = document.createElement('div');\n        this.buttonsNode.classList.add(styles.buttons);\n\n        this.addEmailButtonNode = document.createElement('button');\n        this.addEmailButtonNode.type = 'button';\n        this.addEmailButtonNode.textContent = 'Add email';\n        this.addEmailButtonNode.classList.add(styles.button);\n\n        this.showEmailsCountButtonNode = document.createElement('button')\n        this.showEmailsCountButtonNode.type = 'button';\n        this.showEmailsCountButtonNode.textContent = 'Get emails count';\n        this.showEmailsCountButtonNode.classList.add(styles.button);\n\n        this.boxNode.appendChild(this.inputNode);\n        this.boxWrapperNode.appendChild(this.boxNode);\n\n        this.mainNode.appendChild(this.headerNode);\n        this.mainNode.appendChild(this.boxWrapperNode);\n\n        this.buttonsNode.appendChild(this.addEmailButtonNode);\n        this.buttonsNode.appendChild(this.showEmailsCountButtonNode);\n\n        this.wrapperNode.appendChild(this.mainNode);\n        this.wrapperNode.appendChild(this.buttonsNode);\n\n        this.node.appendChild(this.wrapperNode);\n    }\n\n    initListeners() {\n        this.inputNode.addEventListener('keydown', this.handleInputKeyDown);\n        this.inputNode.addEventListener('keyup', this.handleInputKeyUp);\n        this.inputNode.addEventListener('paste', this.handleInputPaste);\n        this.inputNode.addEventListener('blur', this.handleInputBlur);\n        this.boxWrapperNode.addEventListener('click', this.handleBoxWrapperClick);\n        this.addEmailButtonNode.addEventListener('click', this.handleAddEmailButtonClick);\n        this.showEmailsCountButtonNode.addEventListener('click', this.handleShowEmailsCountButtonClick);\n    }\n\n    clear() {\n        Array.from(this.boxNode.children).forEach((element, index, arr) => {\n            if (index === arr.length - 1) {\n                return;\n            }\n\n            element.remove();\n        });\n    }\n\n    render() {\n        Array.from(this.emails).forEach((email, index) => {\n            const wrapperNode = document.createElement('div');\n\n            wrapperNode.dataset.value = email;\n            wrapperNode.classList.add(styles.tag);\n\n            const textNode = document.createElement('span');\n\n            textNode.contentEditable = true;\n            textNode.spellcheck = false;\n            textNode.textContent = email;\n            textNode.classList.add(styles.item);\n\n            updateClassListByContent(textNode);\n\n            textNode.addEventListener('keydown', this.handleTextKeyDown);\n            textNode.addEventListener('keyup', this.handleTextKeyUp);\n            textNode.addEventListener('input', this.handleTextInput);\n            textNode.addEventListener('blur', this.handleTextBlur);\n\n            const crossNode = document.createElement('div');\n\n            crossNode.classList.add(styles.cross);\n            crossNode.addEventListener('click', this.handleCrossClick);\n\n            wrapperNode.append(textNode);\n            wrapperNode.append(crossNode);\n\n            this.inputNode.before(wrapperNode);\n        });\n    }\n\n    update() {\n        this.clear();\n        this.render();\n        this.handleChange();\n    }\n\n    handleBoxWrapperClick = (event) => {\n        if (event.target === this.boxWrapperNode || event.target === this.boxNode) {\n            this.inputNode.focus();\n        }\n    };\n\n    handleInputKeyDown = (event) => {\n        if (['Space', 'Enter'].includes(event.code)) {\n            event.preventDefault();\n        }\n\n        const { value } = event.currentTarget;\n\n        if (event.code === 'Enter' && value !== '') {\n            this.emails.add(value);\n            this.update();\n            this.inputNode.value = '';\n        }\n    };\n\n    handleInputKeyUp = (event) => {\n        if (event.code !== 'Comma') {\n            return;\n        }\n\n        const emails = event.currentTarget.value\n            .split(',')\n            .filter((email) => email.length !== 0);\n\n        emails.forEach((email) => {\n            this.emails.add(email);\n        });\n\n        if (emails.length !== 0) {\n            this.update();\n        }\n\n        this.inputNode.value = '';\n    };\n\n    handleInputPaste = (event) => {\n        event.preventDefault();\n\n        const emails = event.clipboardData.getData('text')\n            .replace(/\\s/g, '')\n            .split(',')\n            .filter((email) => email.length !== 0);\n\n        emails.forEach((email) => {\n            this.emails.add(email);\n        });\n\n        if (emails.length !== 0) {\n            this.update();\n        }\n\n        this.inputNode.value = '';\n    };\n\n    handleInputBlur = (event) => {\n        if (event.currentTarget.value !== '') {\n            this.emails.add(event.currentTarget.value);\n            this.update();\n        }\n\n        this.inputNode.value = '';\n    };\n\n    handleTextKeyDown = (event) => {\n        if (['Space', 'Enter'].includes(event.code)) {\n            event.preventDefault();\n        }\n\n        if (event.code === 'Enter') {\n            event.currentTarget.removeEventListener('blur', this.handleTextBlur);\n            this.handleTextBlur(event);\n            this.inputNode.focus();\n        }\n    };\n\n    handleTextKeyUp = (event) => {\n        if (event.code !== 'Comma') {\n            return;\n        }\n\n        event.currentTarget.removeEventListener('blur', this.handleTextBlur);\n        this.handleTextBlur(event);\n        this.inputNode.focus();\n    };\n\n    handleTextInput = (event) => {\n        updateClassListByContent(event.currentTarget);\n    };\n\n    handleTextBlur = (event) => {\n        const prev = event.currentTarget.parentNode.dataset.value;\n        const next = event.currentTarget.textContent;\n\n        if (next === prev) {\n            return;\n        }\n\n        const emails = next\n            .replace(/\\s/g, '')\n            .split(',')\n            .filter((email) => email.length !== 0);\n\n        if (emails.length === 0) {\n            this.emails.delete(prev);\n        } else {\n            this.emails = Array.from(this.emails).reduce((acc, email) => {\n                if (email === prev) {\n                    emails.forEach((email) => {\n                        acc.add(email);\n                    });\n                } else {\n                    acc.add(email);\n                }\n\n                return acc;\n            }, new Set());\n        }\n\n        this.update();\n    };\n\n    handleCrossClick = (event) => {\n        this.emails.delete(event.currentTarget.parentNode.dataset.value);\n        this.update();\n    };\n\n    handleAddEmailButtonClick = (event) => {\n        const email = generateEmail();\n\n        this.emails.add(email);\n        this.update();\n    };\n\n    handleShowEmailsCountButtonClick = (event) => {\n        const count = Array.from(this.emails).filter((email) => {\n            return EMAIL_REG_EXP.test(email);\n        }).length;\n\n        alert(count);\n    };\n\n    handleChange = () => {\n        const emails = Array.from(this.emails);\n\n        this.subscribers.forEach((subscriber) => {\n            subscriber(emails);\n        });\n    };\n\n    getEmailsList = () => {\n        return Array.from(this.emails);\n    };\n\n    setEmailsList = (emailsList) => {\n        this.emails = new Set(emailsList);\n        this.update();\n    };\n\n    subscribe = (listener) => {\n        this.subscribers.push(listener);\n    };\n\n    unsubscribe = (listener) => {\n        this.subscribers = this.subscribers.filter((subscriber) => {\n            return subscriber !== listener;\n        });\n    };\n}\n\nexport default EmailsEditor;\n"],"names":["EMAIL_REG_EXP","generateEmail","chars","Math","floor","random","toString","substring","updateClassListByContent","node","isValid","test","textContent","classList","toggle","styles","item_invalid","EmailsEditor","constructor","container","options","event","target","boxWrapperNode","boxNode","inputNode","focus","includes","code","preventDefault","value","currentTarget","emails","add","update","split","filter","email","length","forEach","clipboardData","getData","replace","removeEventListener","handleTextBlur","prev","parentNode","dataset","next","delete","Array","from","reduce","acc","Set","count","alert","subscribers","subscriber","emailsList","listener","push","boardName","init","initListeners","wrapperNode","document","createElement","wrapper","mainNode","main","headerNode","innerHTML","header","box","placeholder","spellcheck","input","buttonsNode","buttons","addEmailButtonNode","type","button","showEmailsCountButtonNode","appendChild","addEventListener","handleInputKeyDown","handleInputKeyUp","handleInputPaste","handleInputBlur","handleBoxWrapperClick","handleAddEmailButtonClick","handleShowEmailsCountButtonClick","clear","children","element","index","arr","remove","render","tag","textNode","contentEditable","item","handleTextKeyDown","handleTextKeyUp","handleTextInput","crossNode","cross","handleCrossClick","append","before","handleChange"],"mappings":"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"}